<% (['development', 'production'] + [@environment]).uniq.each do |env| -%>
    <%= env %>:
    <% if @database[:replica] -%>
      makara:
        sticky: true
          connections:
            - role: master
              name: primary
              url: <%= (@database[:host] || 'localhost').to_s.inspect %> 
            - name: replica
              url: <%= (@database[:replica] || 'localhost').to_s.inspect %>
    <% end -%>
    <% else %>
      adapter: <%= @database[:adapter].to_s.inspect %>
      database: <%= @database[:database].to_s.inspect %>
      encoding: <%= (@database[:encoding] || 'utf8').to_s.inspect %>
      host: <%= (@database[:host] || 'localhost').to_s.inspect %>
      username: <%= @database[:username].to_s.inspect %>
      password: <%= @database[:password].to_s.inspect %>
      reconnect: <%= @database[:reconnect] ? 'true' : 'false' %>
      <% if @database[:pool] -%>
      pool: <%= @database[:pool].to_i.inspect %>
      <% end -%>
      <% if @database[:port] -%>
      port: <%= @database[:port].to_i.inspect %>
      <% end -%>    
    <% end -%>
<% end %>